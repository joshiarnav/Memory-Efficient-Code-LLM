{
  "problem_idx": 1315,
  "task_name": "Sum of Nodes with Even",
  "markdown_description": "\nGiven the `root` of a binary tree, return *the sum of values of nodes with an **even-valued grandparent***. If there are no nodes with an **even-valued grandparent**, return `0`.\n\n\nA **grandparent** of a node is the parent of its parent if it exists.\n\n\n\u00a0\n\n\n**Example 1:**\n\n\n![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1300-1399/1315.Sum%20of%20Nodes%20with%20Even-Valued%20Grandparent/images/even1-tree.jpg)\n\n```\n\n**Input:** root = [6,7,8,2,7,1,3,9,null,1,4,null,null,null,5]\n**Output:** 18\n**Explanation:** The red nodes are the nodes with even-value grandparent while the blue nodes are the even-value grandparents.\n\n```\n\n**Example 2:**\n\n\n![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1300-1399/1315.Sum%20of%20Nodes%20with%20Even-Valued%20Grandparent/images/even2-tree.jpg)\n\n```\n\n**Input:** root = [1]\n**Output:** 0\n\n```\n\n\u00a0\n\n\n**Constraints:**\n\n\n* The number of nodes in the tree is in the range `[1, 104]`.\n* `1 <= Node.val <= 100`\n\n\n",
  "canonical_solution": "# Definition for a binary tree node.\n# class TreeNode:\n#     def __init__(self, val=0, left=None, right=None):\n#         self.val = val\n#         self.left = left\n#         self.right = right\nclass Solution:\n    def sumEvenGrandparent(self, root: TreeNode) -> int:\n        self.res = 0\n\n        def dfs(g, p):\n            if p is None:\n                return\n            if g.val % 2 == 0:\n                if p.left:\n                    self.res += p.left.val\n                if p.right:\n                    self.res += p.right.val\n            dfs(p, p.left)\n            dfs(p, p.right)\n\n        dfs(root, root.left)\n        dfs(root, root.right)\n        return self.res\n",
  "test_case_generator": "\nimport random\n\nclass Solution:\n    def sumEvenGrandparent(self, root):\n        self.res = 0\n\n        def dfs(g, p):\n            if p is None:\n                return\n            if g.val % 2 == 0:\n                if p.left:\n                    self.res += p.left.val\n                if p.right:\n                    self.res += p.right.val\n            dfs(p, p.left)\n            dfs(p, p.right)\n\n        dfs(root, root.left)\n        dfs(root, root.right)\n        return self.res\n\n\ndef generate_test_case():\n    solution = Solution()\n\n    # Generate random binary tree\n    nums = random.sample(range(1, 101), random.randint(1, 10))\n    root = TreeNode(nums[0])\n    nums = nums[1:]\n    queue = [root]\n    i = 0\n    while queue:\n        node = queue.pop(0)\n        if i < len(nums):\n            node.left = TreeNode(nums[i])\n            queue.append(node.left)\n            i += 1\n        if i < len(nums):\n            node.right = TreeNode(nums[i])\n            queue.append(node.right)\n            i += 1\n\n    # Calculate the expected result using the provided Solution class\n    expected_result = solution.sumEvenGrandparent(root)\n\n    return root, expected_result\n\n\ndef test_generated_test_cases(num_tests):\n    test_case_generator_results = []\n    for i in range(num_tests):\n        root, expected_result = generate_test_case()\n        solution = Solution()\n        assert solution.sumEvenGrandparent(root) == expected_result\n        print(f\"assert solution.sumEvenGrandparent({root}) == {expected_result}\")\n        test_case_generator_results.append(f\"assert solution.sumEvenGrandparent({root}) == {expected_result}\")\n    return test_case_generator_results\n\n\nif __name__ == \"__main__\":\n    num_tests = 100  # You can change this to generate more test cases\n    test_case_generator_results = test_generated_test_cases(num_tests)\n",
  "test_case": "assert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f65788e3450>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578940e50>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f657891a9d0>) == 61\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578940fd0>) == 78\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f657891a5d0>) == 14\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578941050>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578940d90>) == 271\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578940f90>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f657891a5d0>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f657891a990>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578940e90>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578941050>) == 244\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578940f10>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578940e50>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578940ed0>) == 198\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578941210>) == 58\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578941150>) == 190\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f65789411d0>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f65789414d0>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578941690>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578941610>) == 52\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578941750>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f65789419d0>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578941a90>) == 117\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578941790>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578941b50>) == 255\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578941c10>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578941d90>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578941f90>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578941d50>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578941e90>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578941b90>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578942210>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578942350>) == 85\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f65789423d0>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578942550>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f65789424d0>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578942750>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578942810>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578942a10>) == 94\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578942bd0>) == 272\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f65789429d0>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578942cd0>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578942790>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578942d50>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578942e50>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578943090>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578942f50>) == 218\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578943250>) == 233\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578943490>) == 135\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578943590>) == 97\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578943690>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578943810>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f65789436d0>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578943910>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578943410>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578943b10>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578943c50>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578943b50>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578943c90>) == 78\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578943ed0>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578943a50>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578943f10>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f657894c210>) == 157\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f657894c110>) == 276\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f657894c3d0>) == 144\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f657894c650>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f657894c750>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f657894c610>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f657894c450>) == 288\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f657894ca50>) == 42\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f657894c950>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f657894cc50>) == 25\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f657894cb10>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f657894cc10>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f657894cd90>) == 57\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f657894cf10>) == 109\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f657894c910>) == 220\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f657894d090>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f65788e3450>) == 86\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578943a50>) == 124\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f657891a990>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578943a50>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578943d90>) == 250\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578943790>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578943c50>) == 160\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578943a90>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578943a10>) == 89\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578943690>) == 134\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578943710>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f65789433d0>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578942fd0>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578943590>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f65789430d0>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578943b10>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578942f90>) == 145\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578943090>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f65789429d0>) == 211\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578943010>) == 0\nassert solution.sumEvenGrandparent(<__main__.TreeNode object at 0x7f6578942bd0>) == 0",
  "inefficient_solution": "class Solution:\n    def sumEvenGrandparent(self, root: TreeNode) -> int:\n        self.res = 0\n        self.grand = {}\n\n        def dfs(n):\n            if n is None:\n                return\n            self.grand[n] = (n.val, n.left, n.right)\n            if n.val % 2 == 0:\n                if n.left and n.left.left:\n                    self.res += n.left.left.val\n                if n.left and n.left.right:\n                    self.res += n.left.right.val\n                if n.right and n.right.left:\n                    self.res += n.right.left.val\n                if n.right and n.right.right:\n                    self.res += n.right.right.val\n            dfs(n.left)\n            dfs(n.right)\n            del self.grand[n]\n\n        dfs(root)\n        return self.res",
  "is_python": true
}