{
  "problem_idx": 527,
  "task_name": "Word Abbreviation",
  "markdown_description": "\nGiven an array of **distinct** strings `words`, return *the minimal possible **abbreviations** for every word*.\n\n\nThe following are the rules for a string abbreviation:\n\n\n1. The **initial** abbreviation for each word is: the first character, then the number of characters in between, followed by the last character.\n2. If more than one word shares the **same** abbreviation, then perform the following operation:\n\t* **Increase** the prefix (characters in the first part) of each of their abbreviations by `1`.\n\t\t+ For example, say you start with the words `[\"abcdef\",\"abndef\"]` both initially abbreviated as `\"a4f\"`. Then, a sequence of operations would be `[\"a4f\",\"a4f\"]` -> `[\"ab3f\",\"ab3f\"]` -> `[\"abc2f\",\"abn2f\"]`.\n\t* This operation is repeated until every abbreviation is **unique**.\n3. At the end, if an abbreviation did not make a word shorter, then keep it as the original word.\n\n\n\u00a0\n\n\n**Example 1:**\n\n\n\n```\n**Input:** words = [\"like\",\"god\",\"internal\",\"me\",\"internet\",\"interval\",\"intension\",\"face\",\"intrusion\"]\n**Output:** [\"l2e\",\"god\",\"internal\",\"me\",\"i6t\",\"interval\",\"inte4n\",\"f2e\",\"intr4n\"]\n\n```\n**Example 2:**\n\n\n\n```\n**Input:** words = [\"aa\",\"aaa\"]\n**Output:** [\"aa\",\"aaa\"]\n\n```\n\n\u00a0\n\n\n**Constraints:**\n\n\n* `1 <= words.length <= 400`\n* `2 <= words[i].length <= 400`\n* `words[i]` consists of lowercase English letters.\n* All the strings of `words` are **unique**.\n\n\n",
  "canonical_solution": "class Trie:\n    __slots__ = [\"children\", \"cnt\"]\n\n    def __init__(self):\n        self.children = [None] * 26\n        self.cnt = 0\n\n    def insert(self, w: str):\n        node = self\n        for c in w:\n            idx = ord(c) - ord(\"a\")\n            if not node.children[idx]:\n                node.children[idx] = Trie()\n            node = node.children[idx]\n            node.cnt += 1\n\n    def search(self, w: str) -> int:\n        node = self\n        cnt = 0\n        for c in w:\n            cnt += 1\n            idx = ord(c) - ord(\"a\")\n            node = node.children[idx]\n            if node.cnt == 1:\n                return cnt\n        return len(w)\n\n\nclass Solution:\n    def wordsAbbreviation(self, words: List[str]) -> List[str]:\n        tries = {}\n        for w in words:\n            m = len(w)\n            if (m, w[-1]) not in tries:\n                tries[(m, w[-1])] = Trie()\n            tries[(m, w[-1])].insert(w)\n        ans = []\n        for w in words:\n            cnt = tries[(len(w), w[-1])].search(w)\n            ans.append(\n                w if cnt + 2 >= len(w) else w[:cnt] + str(len(w) - cnt - 1) + w[-1]\n            )\n        return ans\n",
  "test_case_generator": "\nimport random\nfrom typing import List\n\nclass Trie:\n    __slots__ = [\"children\", \"cnt\"]\n\n    def __init__(self):\n        self.children = [None] * 26\n        self.cnt = 0\n\n    def insert(self, w: str):\n        node = self\n        for c in w:\n            idx = ord(c) - ord(\"a\")\n            if not node.children[idx]:\n                node.children[idx] = Trie()\n            node = node.children[idx]\n            node.cnt += 1\n\n    def search(self, w: str) -> int:\n        node = self\n        cnt = 0\n        for c in w:\n            cnt += 1\n            idx = ord(c) - ord(\"a\")\n            node = node.children[idx]\n            if node.cnt == 1:\n                return cnt\n        return len(w)\n\n\nclass Solution:\n    def wordsAbbreviation(self, words: List[str]) -> List[str]:\n        tries = {}\n        for w in words:\n            m = len(w)\n            if (m, w[-1]) not in tries:\n                tries[(m, w[-1])] = Trie()\n            tries[(m, w[-1])].insert(w)\n        ans = []\n        for w in words:\n            cnt = tries[(len(w), w[-1])].search(w)\n            ans.append(\n                w if cnt + 2 >= len(w) else w[:cnt] + str(len(w) - cnt - 1) + w[-1]\n            )\n        return ans\n\n\ndef generate_test_case():\n    solution = Solution()\n    words = []\n    for _ in range(random.randint(1, 10)):\n        word = \"\"\n        for _ in range(random.randint(1, 10)):\n            word += chr(random.randint(ord(\"a\"), ord(\"z\")))\n        words.append(word)\n    expected_result = solution.wordsAbbreviation(words)\n    return words, expected_result\n\ndef test_generated_test_cases(num_tests):\n    test_case_generator_results = []\n    for i in range(num_tests):\n        words, expected_result = generate_test_case()\n        solution = Solution()\n        assert solution.wordsAbbreviation(words) == expected_result\n        print(f'assert solution.wordsAbbreviation({words}) == {expected_result}')\n        test_case_generator_results.append(f'assert solution.wordsAbbreviation({words}) == {expected_result}')\n    return test_case_generator_results\n\nif __name__ == \"__main__\":\n    num_tests = 100 \n    test_case_generator_results = test_generated_test_cases(num_tests)\n",
  "test_case": "assert solution.wordsAbbreviation(['ggkgzjpf', 'xovkwx', 'olbn']) == ['g6f', 'x4x', 'o2n']\nassert solution.wordsAbbreviation(['el', 'dqh', 'laahe']) == ['el', 'dqh', 'l3e']\nassert solution.wordsAbbreviation(['jfckrtx', 'gbpugdalt', 'ehot', 'febj', 'by', 'ff', 'uyvucfcypo', 'srcrttymku']) == ['j5x', 'g7t', 'e2t', 'f2j', 'by', 'ff', 'u8o', 's8u']\nassert solution.wordsAbbreviation(['bboftpag', 'lzavexquoo', 'ocgzcjsw', 'usoxqccu', 'eybqbso', 'nlnrhm']) == ['b6g', 'l8o', 'o6w', 'u6u', 'e5o', 'n4m']\nassert solution.wordsAbbreviation(['yrnb', 'reszfvzwsm', 'mvzmydsttc', 'iejtazaek', 'psxaajcy', 'ubx', 'ardicpegz', 'ov', 'hsydbtn']) == ['y2b', 'r8m', 'm8c', 'i7k', 'p6y', 'ubx', 'a7z', 'ov', 'h5n']\nassert solution.wordsAbbreviation(['dyumohkw', 'eisqidxb', 'qjirmuq', 'aefs', 'pce', 'ophnshe', 'svnjpafmf', 'xkhi']) == ['d6w', 'e6b', 'q5q', 'a2s', 'pce', 'o5e', 's7f', 'x2i']\nassert solution.wordsAbbreviation(['brhwkgbjw', 'wfqk', 'krnc', 's', 'zaran']) == ['b7w', 'w2k', 'k2c', 's', 'z3n']\nassert solution.wordsAbbreviation(['thhjjqwl', 'rxd', 'vhvc', 'tc', 'bfp']) == ['t6l', 'rxd', 'v2c', 'tc', 'bfp']\nassert solution.wordsAbbreviation(['hhhhant', 'nkewfqslty', 'ftuohdrnbf', 'hvvl', 'soyjujiy']) == ['h5t', 'n8y', 'f8f', 'h2l', 's6y']\nassert solution.wordsAbbreviation(['ogkaqgsj', 'htswg', 'v', 'mgbredffy', 'jyokzsor', 'cl', 'gmrtldc', 'dbvcqlew']) == ['o6j', 'h3g', 'v', 'm7y', 'j6r', 'cl', 'g5c', 'd6w']\nassert solution.wordsAbbreviation(['angxlx', 'pfcpkamubh', 'gyhsjpz']) == ['a4x', 'p8h', 'g5z']\nassert solution.wordsAbbreviation(['csjref', 'sadlrsv', 'ycchhqoh', 'mencdaqbqd', 'jw', 'elc', 'uwcpjdxq', 'agimsu', 'xw', 'pethiffkj']) == ['c4f', 's5v', 'y6h', 'm8d', 'jw', 'elc', 'u6q', 'a4u', 'xw', 'p7j']\nassert solution.wordsAbbreviation(['fkgkg', 'wdswngruig', 'dhgwnh', 'jpiuhsikom', 'opbhcxylx']) == ['f3g', 'w8g', 'd4h', 'j8m', 'o7x']\nassert solution.wordsAbbreviation(['qcpo', 'qdztkh', 'ol', 'zpvycps', 'a', 'th', 'yezp', 'lbvnaxks', 'z']) == ['q2o', 'q4h', 'ol', 'z5s', 'a', 'th', 'y2p', 'l6s', 'z']\nassert solution.wordsAbbreviation(['a', 'dlkga', 'qoyfgnruo', 'mzabw']) == ['a', 'd3a', 'q7o', 'm3w']\nassert solution.wordsAbbreviation(['yul', 'bxjeaaazb', 'mfayvkhhem', 'ibicq', 'mwfbqdfy', 'dcu']) == ['yul', 'b7b', 'm8m', 'i3q', 'm6y', 'dcu']\nassert solution.wordsAbbreviation(['zsyqvqdvt', 'psqe', 'lncu', 'rl', 'reaj', 'm', 'zrezljst', 'cpta']) == ['z7t', 'p2e', 'l2u', 'rl', 'r2j', 'm', 'z6t', 'c2a']\nassert solution.wordsAbbreviation(['ckif', 'gkcezglzrz', 'ugosfeg']) == ['c2f', 'g8z', 'u5g']\nassert solution.wordsAbbreviation(['mrf', 'srlozoucm', 'epwitgfj', 'of', 'npnaylqtzx', 'bwon']) == ['mrf', 's7m', 'e6j', 'of', 'n8x', 'b2n']\nassert solution.wordsAbbreviation(['jsing', 'r', 'fxztsnsltq', 'acaji']) == ['j3g', 'r', 'f8q', 'a3i']\nassert solution.wordsAbbreviation(['gusswb', 'vigm', 'asblgztq', 'etcvr', 'pfxgt']) == ['g4b', 'v2m', 'a6q', 'e3r', 'p3t']\nassert solution.wordsAbbreviation(['zrrbcvt', 'vmsegboz', 'zgpgqkqk', 'vlwie']) == ['z5t', 'v6z', 'z6k', 'v3e']\nassert solution.wordsAbbreviation(['ga']) == ['ga']\nassert solution.wordsAbbreviation(['ak', 'ylxhjvls', 'ilcuxt', 'shykr', 'bdfcvirfr', 'r', 'a', 'rv', 'y', 'fren']) == ['ak', 'y6s', 'i4t', 's3r', 'b7r', 'r', 'a', 'rv', 'y', 'f2n']\nassert solution.wordsAbbreviation(['ekdincjqs', 'j', 'oidluzgraa', 'dsmtkryfkw', 'msjjrqwxev', 'yerjiv']) == ['e7s', 'j', 'o8a', 'd8w', 'm8v', 'y4v']\nassert solution.wordsAbbreviation(['tzv', 'vj', 'ucfgfg', 'qhylpqjj']) == ['tzv', 'vj', 'u4g', 'q6j']\nassert solution.wordsAbbreviation(['bjst', 'mzeog', 'apmakt', 'xuxmfdj', 'espkm', 'hqhmk', 'rv', 'tk', 'f', 'mutmvtk']) == ['b2t', 'm3g', 'a4t', 'x5j', 'e3m', 'h3k', 'rv', 'tk', 'f', 'm5k']\nassert solution.wordsAbbreviation(['dlvmicsms', 'm', 'bbedlizj', 'npfcaks', 'sld', 'afmbbc', 'ykibdzqdwl', 'ib']) == ['d7s', 'm', 'b6j', 'n5s', 'sld', 'a4c', 'y8l', 'ib']\nassert solution.wordsAbbreviation(['fxzo', 'jgmaezcmm', 'hpbog', 'hcduavfujy', 'zq']) == ['f2o', 'j7m', 'h3g', 'h8y', 'zq']\nassert solution.wordsAbbreviation(['x', 'ccxloqsz', 'sxxjdouv', 'uqfc', 'th', 'hvomgqmeae', 'ktfqeys', 'iiypdqb']) == ['x', 'c6z', 's6v', 'u2c', 'th', 'h8e', 'k5s', 'i5b']\nassert solution.wordsAbbreviation(['v', 'vxxat', 'kwdmqqm', 'uusawokva', 'olnoudwaxc', 'z', 'zspwt']) == ['v', 'v3t', 'k5m', 'u7a', 'o8c', 'z', 'z3t']\nassert solution.wordsAbbreviation(['rmt', 'n']) == ['rmt', 'n']\nassert solution.wordsAbbreviation(['gdovdfajx', 'bwkzsnkbn', 'fhjskjxaj']) == ['g7x', 'b7n', 'f7j']\nassert solution.wordsAbbreviation(['ddkpc', 'quwgfcbtnd', 'x', 'ewmrlfhrj', 'gccvxvc']) == ['d3c', 'q8d', 'x', 'e7j', 'g5c']\nassert solution.wordsAbbreviation(['nxowfcmxm']) == ['n7m']\nassert solution.wordsAbbreviation(['dcwxaapevh', 'bimepjaa', 'avcnd', 'fvbt', 'rcvttyysq']) == ['d8h', 'b6a', 'a3d', 'f2t', 'r7q']\nassert solution.wordsAbbreviation(['zi', 'uehgjxkm', 'vpj']) == ['zi', 'u6m', 'vpj']\nassert solution.wordsAbbreviation(['vnilrswrsf', 'cjln', 'awkydzpxy']) == ['v8f', 'c2n', 'a7y']\nassert solution.wordsAbbreviation(['nruspible', 'vo', 'koaawwlz', 'cl', 'answpyw', 'bqqxuegs']) == ['n7e', 'vo', 'k6z', 'cl', 'a5w', 'b6s']\nassert solution.wordsAbbreviation(['xj', 'twawvdqb', 'vhc', 'wutlaot', 'nivlvr', 'sulgxmu', 'hyrlquy', 'rnjvgnbxd', 'zsest', 'ahusglqkhu']) == ['xj', 't6b', 'vhc', 'w5t', 'n4r', 's5u', 'h5y', 'r7d', 'z3t', 'a8u']\nassert solution.wordsAbbreviation(['qmrmpumy', 'xd', 'y', 'sclp', 'alubdldjg', 'wdagy', 'pbytyo', 'tak', 'vgyyjq', 'kfxaxkw']) == ['q6y', 'xd', 'y', 's2p', 'a7g', 'w3y', 'p4o', 'tak', 'v4q', 'k5w']\nassert solution.wordsAbbreviation(['st', 'wdhyeu', 'uuxxvubbhh', 'mtnvsdns']) == ['st', 'w4u', 'u8h', 'm6s']\nassert solution.wordsAbbreviation(['wxzjkl']) == ['w4l']\nassert solution.wordsAbbreviation(['blmkn', 'ohyychm']) == ['b3n', 'o5m']\nassert solution.wordsAbbreviation(['uhc', 'rekcsecx']) == ['uhc', 'r6x']\nassert solution.wordsAbbreviation(['qrollpghk', 'lzffbjbjs', 'jjjwnpv', 'rcvz', 'qpxjd', 'wexnjiu', 'bfumw', 'dgvrlzhn', 'feenqfg']) == ['q7k', 'l7s', 'j5v', 'r2z', 'q3d', 'w5u', 'b3w', 'd6n', 'f5g']\nassert solution.wordsAbbreviation(['ebf', 'ivqtqxuj', 'wptsvdatix', 'wncl', 'ozflzm']) == ['ebf', 'i6j', 'w8x', 'w2l', 'o4m']\nassert solution.wordsAbbreviation(['jkumw', 'm', 'exldl', 'fotxp', 'twsh', 'lahtdmw']) == ['j3w', 'm', 'e3l', 'f3p', 't2h', 'l5w']\nassert solution.wordsAbbreviation(['cxlgglpd', 'b', 'y', 'klydtvv', 'o', 'pml', 'negvqeeq', 'eexxgn', 'igqoyku', 'zqbolowgfc']) == ['c6d', 'b', 'y', 'k5v', 'o', 'pml', 'n6q', 'e4n', 'i5u', 'z8c']\nassert solution.wordsAbbreviation(['yamjrgjxxx', 'oajb']) == ['y8x', 'o2b']\nassert solution.wordsAbbreviation(['spra', 'rcpljwq']) == ['s2a', 'r5q']\nassert solution.wordsAbbreviation(['qc', 'pmpkve', 'byi', 'lja', 'wawwd', 'ftrmkyehdm', 'eaoi', 'ugflhcufe', 'zs', 'yumpwm']) == ['qc', 'p4e', 'byi', 'lja', 'w3d', 'f8m', 'e2i', 'u7e', 'zs', 'y4m']\nassert solution.wordsAbbreviation(['cx', 'fgfooudzzv', 'ulrmvcgf', 'ft', 'qpytbkbim', 'lapt', 'rdvqwa', 'ltxnal', 'yaw']) == ['cx', 'f8v', 'u6f', 'ft', 'q7m', 'l2t', 'r4a', 'l4l', 'yaw']\nassert solution.wordsAbbreviation(['gowt', 'icxlh', 'otveyrlkt', 'qxziflb', 'syqn', 'pqbb']) == ['g2t', 'i3h', 'o7t', 'q5b', 's2n', 'p2b']\nassert solution.wordsAbbreviation(['yucvq']) == ['y3q']\nassert solution.wordsAbbreviation(['cuouxago', 'juhm', 'icuzuq', 'th', 'mchkrbpk', 'ckqduurd', 'lbuzbjtl']) == ['c6o', 'j2m', 'i4q', 'th', 'm6k', 'c6d', 'l6l']\nassert solution.wordsAbbreviation(['vpxjssups', 'mlrjzuoqt', 'cxg', 'rdof', 'qzvnc']) == ['v7s', 'm7t', 'cxg', 'r2f', 'q3c']\nassert solution.wordsAbbreviation(['rjerxysjzz', 'zvnpmjxz', 'fkvzkbpfu', 'johkinv']) == ['r8z', 'z6z', 'f7u', 'j5v']\nassert solution.wordsAbbreviation(['kvqyu', 'xnuiplrlk', 'we', 'nawuhrqxyk']) == ['k3u', 'x7k', 'we', 'n8k']\nassert solution.wordsAbbreviation(['crz', 'gqzvkddn', 'guiamhr', 'qyexmt', 'xh', 'qwpsoe', 'qfmnmr', 'dwdjeiqgmm']) == ['crz', 'g6n', 'g5r', 'q4t', 'xh', 'q4e', 'q4r', 'd8m']\nassert solution.wordsAbbreviation(['bpzep']) == ['b3p']\nassert solution.wordsAbbreviation(['mg']) == ['mg']\nassert solution.wordsAbbreviation(['ngadfeenr', 'vyhlk', 'nkmprnhqx']) == ['n7r', 'v3k', 'n7x']\nassert solution.wordsAbbreviation(['meyesm', 'g', 'n']) == ['m4m', 'g', 'n']\nassert solution.wordsAbbreviation(['dcnuy', 'kzx', 'qbooypyzwf', 'xwaawt', 'bc', 'mngoqnwvxy', 'hyyocnr', 'sgvwsr']) == ['d3y', 'kzx', 'q8f', 'x4t', 'bc', 'm8y', 'h5r', 's4r']\nassert solution.wordsAbbreviation(['oxit', 'xyvmpchmk', 'cgwmkfvo', 'ewpbqweq']) == ['o2t', 'x7k', 'c6o', 'e6q']\nassert solution.wordsAbbreviation(['euwnjr', 'x', 'urhzpvimag', 'fblwweobf', 'wpatkgal', 'qxfnunkvep', 'ykyaut', 'gznrkc', 't']) == ['e4r', 'x', 'u8g', 'f7f', 'w6l', 'q8p', 'y4t', 'g4c', 't']\nassert solution.wordsAbbreviation(['o', 'xdilp']) == ['o', 'x3p']\nassert solution.wordsAbbreviation(['bv', 'gtobomlteq', 'qhhvtdp', 'ks', 'fsdxpz', 'mjn', 'l']) == ['bv', 'g8q', 'q5p', 'ks', 'f4z', 'mjn', 'l']\nassert solution.wordsAbbreviation(['mgkjsya', 'pjgkwcoi', 'qv', 'yp', 'ymbtznqd', 'wrrkamxvp']) == ['m5a', 'p6i', 'qv', 'yp', 'y6d', 'w7p']\nassert solution.wordsAbbreviation(['wl', 'cikdlvmfy', 'oz']) == ['wl', 'c7y', 'oz']\nassert solution.wordsAbbreviation(['mwjmnbk']) == ['m5k']\nassert solution.wordsAbbreviation(['yzexb', 'zwqxir', 'xsacdkoojs', 'wi', 'xcqeelras', 'md', 'tyzbmubvao', 'syusfgq', 'ffqqdlp', 'nvzgpmp']) == ['y3b', 'z4r', 'x8s', 'wi', 'x7s', 'md', 't8o', 's5q', 'f5p', 'n5p']\nassert solution.wordsAbbreviation(['mljznd', 'nn', 'uvmu', 'mulftpflef', 'alt']) == ['m4d', 'nn', 'u2u', 'm8f', 'alt']\nassert solution.wordsAbbreviation(['w', 'iehv', 'fclvlg', 't', 'gglxwfra', 'p', 'taqcxlfth', 'xtwmphsl']) == ['w', 'i2v', 'f4g', 't', 'g6a', 'p', 't7h', 'x6l']\nassert solution.wordsAbbreviation(['gbhkofutaf', 'rdmu', 'wmhajrebsi', 'oojdpwi']) == ['g8f', 'r2u', 'w8i', 'o5i']\nassert solution.wordsAbbreviation(['ocemrmicyg', 'ke', 'mkbofkm', 'fxlpafx', 'uoa', 'qhrk', 'fx', 'xpdmv', 'wuexalu']) == ['o8g', 'ke', 'm5m', 'f5x', 'uoa', 'q2k', 'fx', 'x3v', 'w5u']\nassert solution.wordsAbbreviation(['pzo', 'ntaxmdu', 'stzwi']) == ['pzo', 'n5u', 's3i']\nassert solution.wordsAbbreviation(['sm', 'a', 'mjgbvsub', 'tnrhccz', 'nrbouxf', 'a']) == ['sm', 'a', 'm6b', 't5z', 'n5f', 'a']\nassert solution.wordsAbbreviation(['cnltnoythi', 'g', 'swagnpil', 'ijwr']) == ['c8i', 'g', 's6l', 'i2r']\nassert solution.wordsAbbreviation(['fp', 'ddkl', 'ejsqxucvp', 'rjfyd', 'vhl', 'qnmng', 'gf']) == ['fp', 'd2l', 'e7p', 'r3d', 'vhl', 'q3g', 'gf']\nassert solution.wordsAbbreviation(['auvsddr', 'axewnsfrwl', 'nmoyilhou', 'te', 'gogu']) == ['a5r', 'a8l', 'n7u', 'te', 'g2u']\nassert solution.wordsAbbreviation(['sqsplfdlw']) == ['s7w']\nassert solution.wordsAbbreviation(['nktmmm', 'yeyrdmi', 'kraeljw', 'yhbrdarrbn', 'xr', 'xxg', 'ozsjexejf', 'oon']) == ['n4m', 'y5i', 'k5w', 'y8n', 'xr', 'xxg', 'o7f', 'oon']\nassert solution.wordsAbbreviation(['dvqwgu', 'semeqsa', 'nrns', 'slzyhgv', 'bughcpjis', 'ju']) == ['d4u', 's5a', 'n2s', 's5v', 'b7s', 'ju']\nassert solution.wordsAbbreviation(['bxrwzhbe', 'jjbd', 'gtcgppp', 'bowbut', 'wqypc', 'l', 'brhphla', 'lkpuay', 'qu']) == ['b6e', 'j2d', 'g5p', 'b4t', 'w3c', 'l', 'b5a', 'l4y', 'qu']\nassert solution.wordsAbbreviation(['txev', 'n']) == ['t2v', 'n']\nassert solution.wordsAbbreviation(['zi', 'ubzetbeqve', 'lrfw', 'iadwrchixl', 'g', 'zteyvx']) == ['zi', 'u8e', 'l2w', 'i8l', 'g', 'z4x']\nassert solution.wordsAbbreviation(['pmnh', 'xj', 'hzxob', 'wffvqjtvw']) == ['p2h', 'xj', 'h3b', 'w7w']\nassert solution.wordsAbbreviation(['xxkr', 'tscvs', 'tpstcoo', 'bqnhcyaj', 'fy', 'ayvuburup']) == ['x2r', 't3s', 't5o', 'b6j', 'fy', 'a7p']\nassert solution.wordsAbbreviation(['tgvivfnt', 'coswvpci', 'caypozgvcr', 'mqi', 'jqccftjiw']) == ['t6t', 'c6i', 'c8r', 'mqi', 'j7w']\nassert solution.wordsAbbreviation(['rzn', 'oz']) == ['rzn', 'oz']\nassert solution.wordsAbbreviation(['ake', 'e', 'waxyzjye', 'y', 'jrhtjxcemm', 'exmrwlofq', 'fppn']) == ['ake', 'e', 'w6e', 'y', 'j8m', 'e7q', 'f2n']\nassert solution.wordsAbbreviation(['rdsjma', 'ibmkeyffi', 'zwcbli']) == ['r4a', 'i7i', 'z4i']\nassert solution.wordsAbbreviation(['xkdwjqs', 'xhwjuewix', 'a']) == ['x5s', 'x7x', 'a']\nassert solution.wordsAbbreviation(['vec']) == ['vec']\nassert solution.wordsAbbreviation(['ee', 'crrok', 'ntrxaac', 'en', 'qyczicmj', 'kbr', 'mutcqt', 'kfgypuzh', 'z']) == ['ee', 'c3k', 'n5c', 'en', 'q6j', 'kbr', 'm4t', 'k6h', 'z']\nassert solution.wordsAbbreviation(['vkvwezvbm', 'tk', 'orwuwmm', 'rimo', 'n', 'hn', 'hznj', 'j', 'bxmbl']) == ['v7m', 'tk', 'o5m', 'r2o', 'n', 'hn', 'h2j', 'j', 'b3l']\nassert solution.wordsAbbreviation(['kyfubgfav', 'yudbg', 'i']) == ['k7v', 'y3g', 'i']\nassert solution.wordsAbbreviation(['fifzxbyya', 'dexmf', 'qyvvwua', 'ilex', 'aw', 'eeaxket', 'pdrwchmuw', 'fukvia', 'gowagjkzm']) == ['f7a', 'd3f', 'q5a', 'i2x', 'aw', 'e5t', 'p7w', 'f4a', 'g7m']",
  "inefficient_solution": "class Solution:\n    def wordsAbbreviation(self, words: List[str]) -> List[str]:\n        trie = Trie()\n        for w in words:\n            trie.insert(w)\n        ans = []\n        for i, w in enumerate(words):\n            abbr = self._get_abbreviation(trie, w)\n            ans.append(abbr)\n        return ans\n\n    def _get_abbreviation(self, trie: Trie, w: str) -> str:\n        m = len(w)\n        prefix = \"\"\n        while True:\n            abbreviation = self._get_initial_abbreviation(w)\n            if abbreviation in trie.children:\n                prefix += \"a\"\n                abbreviation = self._get_initial_abbreviation(w, prefix)\n            else:\n                break\n        return abbreviation\n\n    def _get_initial_abbreviation(self, w: str, prefix: str = \"\") -> str:\n        m = len(w)\n        return prefix + str(m - len(prefix) - 2) + w[0] + w[-1]\n\nclass Trie:\n    __slots__ = [\"children\", \"cnt\"]\n\n    def __init__(self):\n        self.children = [None] * (26 ** 5)\n        self.cnt = 0\n\n    def insert(self, w: str):\n        node = self\n        for c in w:\n            idx = ord(c) - ord(\"a\")\n            node.children[idx] = Trie()\n            node = node.children[idx]\n            node.cnt += 1\n\n    def search(self, w: str) -> int:\n        node = self\n        cnt = 0\n        for c in w:\n            cnt += 1\n            idx = ord(c) - ord(\"a\")\n            node = node.children[idx]\n        return cnt\n\n    def __contains__(self, item: str) -> bool:\n        node = self\n        for c in item:\n            idx = ord(c) - ord(\"a\")\n            if not node.children[idx]:\n                return False\n            node = node.children[idx]\n        return True",
  "is_python": true
}